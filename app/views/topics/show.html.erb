<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "projects" %>
  <%= stylesheet_link_tag "tailwind", "new_tailwind" %>
<% end %>
<% breadcrumb :topic, @topic %>
<% content_for :hide_toggler, true %>
<% content_for :title,
"#{@topic.current_title.truncate(TITLE_NAME_LIMIT)} - View Topic | ProPro" %>

<main class="min-h-screen bg-gray-50 w-full pt-[1em] pb-6">
  <div class="max-w-[1920px] mx-auto w-full px-4 md:px-12 xl:px-16">
    <section class="project-content">
      <h5><%= tag.div(flash[:alert], style: "color:red") if flash[:alert] %></h5>
      <h5><%= tag.div(flash[:notice], style: "color:green") if flash[:notice] %></h5>
      <% current_version = @index %>
      <% oldest_version = 1 %>
      <% latest_version = @instances.size %>
      <%= render "topic_header",
      current_instance: @current_instance,
      owner: @owner,
      topic: @topic,
      members: @members,
      current_version: current_version,
      latest_version: latest_version,
      oldest_version: oldest_version,
      instances: @instances %>
      <%= render "topic_actions",
      members: @members,
      current_user: current_user,
      topic: @topic,
      current_version: current_version,
      latest_version: latest_version,
      course: @course %>
      <%= render "topic_comments",
      comments: @comments,
      new_comment: @new_comment,
      course: @course,
      topic: @topic,
      current_instance_id: @current_instance.id,
      current_version: current_version,
      latest_version: latest_version %>
      <%= render "topic_fields", fields: @fields, next_fields: @next_fields %>
      <div class="flex items-center justify-center mt-3">
        <%= link_to course_path(@course), class: "group flex items-center text-sm font-medium text-gray-500 hover:text-green-600 transition-colors" do %>
          <div
            class="
              w-8 h-8 rounded-full bg-white border border-gray-200 flex items-center
              justify-center mr-2 group-hover:border-green-300 shadow-sm transition-all
            "
          >
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18"
              /></svg>
          </div>
          Back to Course
        <% end %>
      </div>
    </section>
  </div>
</main>
