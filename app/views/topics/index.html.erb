<% content_for :stylesheets do %>
  <%= stylesheet_link_tag "courses" %>
  <%= stylesheet_link_tag "tailwind", "new_tailwind" %>
<% end %>
<% content_for :no_sidebar, true %>
<% content_for :hide_toggler, true %>
<% content_for :breadcrumbs do %>

  <%= link_to "Dashboard",
  root_path,
  class:
    "text-gray-500 hover:text-gray-900 font-medium transition-colors no-underline" %>

  <span class="mx-3 text-gray-400">&gt;</span>

  <%= link_to @course.course_name,
  course_path(@course),
  class:
    "text-gray-500 hover:text-gray-900 font-medium transition-colors no-underline" %>

  <span class="mx-3 text-gray-400">&gt;</span>

  <span class="text-gray-900 font-medium truncate">
    Topics
  </span>

<% end %>
<% content_for :title,
"Topics List - #{@course.course_name.truncate(TITLE_NAME_LIMIT)} | ProPro" %>
<%= render "topbar", user: current_user %>

<main class="main">
  <header class="section-header">
    <h1>Topics for
      <%= @course.course_name %></h1>
  </header>

  <section class="search-bar-container">
    <%= form_with url: course_topics_path(@course), method: :get, local: true, class: "search-form" do %>
      <%= label_tag :query, "Search topics:", class: "search-label" %>
      <%= text_field_tag :query,
      params[:query],
      class: "search-input",
      placeholder: "Enter keyword..." %>
      <%= submit_tag "Search", class: "btn btn-secondary" %>
    <% end %>
  </section>

  <h5><%= tag.div(flash[:alert], style: "color:red") if flash[:alert] %></h5>
  <h5><%= tag.div(flash[:notice], style: "color:green") if flash[:notice] %></h5>

  <section class="topics-list" id="topics-list">
    <div class="cards-container">
      <% if @topics.any? %>
        <%= render partial: "courses/topic_card", collection: @topics, as: :topic %>
      <% else %>
        <p class="empty-state">No topics found.</p>
      <% end %>
    </div>
  </section>

  <div class="form-actions">
    <%= link_to "Back to Course", course_path(@course), class: "btn-normal" %>
  </div>
</main>

<%= javascript_include_tag "courses", "data-turbo-track": "reload", defer: true %>
